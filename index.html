<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <script type="text/javascript" src="jquery-2.1.4.js"></script>
        <style>
            body {
                background-color:   #988e4e;
                color:              #222222;
                font-family:        Tahoma;
            }
            input.ui {
                border-radius:      4px;
                background-color:   #e3dba9;
                box-shadow:         3px 3px 1px #7a702f;
            }
        </style>
    </head>
    <body>
        <script language="javascript" src="./lib/sha512.js"></script>
        <script language="javascript" src="./lib/core.js"></script>
        <script language="javascript" src="./lib/plugin_login.js"></script>
        <div style="position: absolute;" id="frame_ui" class="ui">
        </div>
        <div style="visibility: hidden; text-align: center; position: absolute; width: 100%; height: 100%; background-color: rgba(190, 190, 190, 0.5)" id="waitscreen">
        </div>        
        <script language="javascript">
            /*
                This will return the parameters supplied in the
                URL string that was used to access this document.
            */
            function GetURLParameters() {
                var url = window.location.search.substring(1);
                var vars = url.split('&');
                var table = {};

                for (var i = 0; i < vars.length; ++i) {
                    var pair = vars[i].split('=');
                    table[pair[0]] = decodeURI(pair[1]);
                }

                return table;
            }

            function TimeKeeper(frame) {
                var __tk = this;
                this.prefix = frame.id + '__';

                frame.style.margin = '10px';

                $(frame).append('<span style="display: inline; font-size: 3em; color: #cccccc;">Time Keeper</span> <img style="width: 30px; height: 30px;" src="logo.png"/> <i style="color: #666666; font-size: 0.5em;">version 0.0.1</i><hr/><br/>');

                var menu = document.createElement('div');
                var container = document.createElement('div');

                $(frame).append(menu, container);

                container.style.margin = '10px';

                this.plugins = {
                    'Login':         plugin_Login,
                    'Console':       plugin_Console,
                    'Calendar':      plugin_Calendar,
                    'Reports':       plugin_Reports,
                }

                menu.className = 'ui';

                for (var k in this.plugins) {
                    alert('loading plugin ' + k);
                    var newframe = document.createElement('div');
                    newframe.style.position = 'absolute';
                    newframe.className = 'ui';
                    newframe.style.width = '500px';
                    this.plugins[k] = {
                        'object':          new plugin_Login(this, newframe), 
                        'frame':           newframe,
                    };
                    $(container).append(newframe);
                    var menubtn = document.createElement('input');
                    menubtn.type = 'submit';
                    menubtn.value = k;
                    menubtn.className = 'ui';
                    $(menu).append(menubtn);
                }
            }

            var g__tk = new TimeKeeper(frame_ui);

            month_num_to_name = [
                'Error',
                'January', 'Feburary', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November',
                'December'
            ];
        </script>
    </body>
</html>